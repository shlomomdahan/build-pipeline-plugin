<div class="build-card rounded {{build.status}} {{#if project.disabled}}disabled{{/if}}">
    <div class="header">
        <a href="{{viewSettings.rootURL}}/{{build.url}}" title="{{project.name}}">
            {{#unless build.isPending}}
                {{#unless build.isReadyToBeManuallyBuilt}}
                    {{#if build.displayName}}
                        {{build.displayName}}
                    {{else}}
                        #{{build.number}}
                    {{/if}}
                {{/unless}}
            {{/unless}}
            {{#if project.displayName}}
                {{project.displayName}}
            {{else}}
                {{project.name}}
            {{/if}}
        </a>
    </div>
    <div class="build-info">
        <ul>
            {{#if build.startDate}}
                <li class="build-time" title="Start date: {{build.startDate}} {{build.startTime}}">{{build.startDate}} {{build.startTime}}</li>
            {{else}}
                <li class="build-time"><abbr title="Not Applicable">N/A</abbr></li>
            {{/if}}

            {{#if build.isBuilding}}
                <li class="build-duration" title="Build duration: {{build.duration}}">{{build.duration}}</li>
            {{else}}
                {{#if build.isComplete}}
                    <li class="build-duration" title="Build duration: {{build.duration}}">{{build.duration}}</li>
                {{else}}
                    <li class="build-duration"><abbr title="Not Applicable">N/A</abbr></li>
                {{/if}}
            {{/if}}

            {{#if build.userId}}
                <li class="build-user" title="User: {{build.userId}}">{{build.userId}}</li>
            {{/if}}
        </ul>
    </div>
    <div class="build-actions">
        {{#unless project.disabled}}
            <div class="status-bar" id="status-bar-{{id}}">
                {{#if build.isBuilding}}
<!--                    <span class="bct-progress-bar-onclick-params" data-fill-dialog-href="{{viewSettings.rootURL}}/{{build.url}}console" data-fill-dialog-title="Console output for {{project.name}} #{{build.number}}" style="display:none"></span>-->
                    <div class="bct-progress-bar-onclick" data-fill-dialog-href="{{viewSettings.rootURL}}/{{build.url}}console" data-fill-dialog-title="Console output for {{project.name}} #{{build.number}}">
                        <table class="progress-bar" align="center">
                            <tbody>
                            <tr title="Estimated remaining time: {{build.estimatedRemainingTime}}">
                                <td style="width: {{build.progress}}%" class="progress-bar-done" id="progress-bar-done{{id}}"></td>
                                <td style="width: {{build.progressLeft}}%" class="progress-bar-left" id="progress-bar-left{{id}}"></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                {{/if}}
            </div>

            <div class="icons" id="icons-{{id}}">
                {{#if project.parameters.length}}
                    <img title="This job has parameters" alt="This job has parameters" src="{{viewSettings.rootURL}}/plugin/build-pipeline-plugin/images/has-parameter.png"/>
                {{/if}}
                {{#unless build.isPending}}
                    {{#unless build.isReadyToBeManuallyBuilt}}
                        {{#if viewSettings.isNewWindowConsoleOutput}}
                            <a href="{{viewSettings.rootURL}}/{{build.url}}console" target="_blank">
                                <span class="icon-terminal icon-sm"></span>
                                <img src="{{viewSettings.rootURL}}/plugin/build-pipeline-plugin/images/console.png" alt="console-icon"/>
                            </a>
                        {{else}}
                            {{#if viewSettings.isThisWindowConsoleOutput}}
                                <a href="{{viewSettings.rootURL}}/{{build.url}}console">
                                    <span class="icon-terminal icon-sm"></span>
                                    <img src="{{viewSettings.rootURL}}/plugin/build-pipeline-plugin/images/console.png" alt="console-icon"/>
                                </a>
                            {{else}}
<!--                                <span class="bct-console-icon-onclick-params" data-fill-dialog-href="{{viewSettings.rootURL}}/{{build.url}}console" data-fill-dialog-title="Console output for {{project.name}} #{{build.number}}" style="display:none"></span>-->
                                <span class="bct-console-icon-onclick" data-fill-dialog-href="{{viewSettings.rootURL}}/{{build.url}}console" data-fill-dialog-title="Console output for {{project.name}} #{{build.number}}">
                                    <span class="icon-terminal icon-sm"></span>
                                    <img src="{{viewSettings.rootURL}}/plugin/build-pipeline-plugin/images/console.png" alt="console-icon"/>
                                </span>
                            {{/if}}
                        {{/if}}
                    {{/unless}}
                {{/unless}}

                {{#if build.isRerunnable}}
                    {{#if build.isSuccess}}
                        {{#unless viewSettings.isTriggerOnlyLatestJob}}
                            {{#if viewSettings.hasBuildPermission}}
<!--                                <span class="bct-rerun-successful-build-onclick-params" data-show-spinner-id="{{id}}" data-rerun-build-ext-id="{{build.extId}}" data-rerun-build-dependency-ids="{{build.dependencyIds}}" style="display: none;"></span>-->
                                <span class="bct-rerun-successful-build-onclick" data-show-spinner-id="{{id}}" data-rerun-build-ext-id="{{build.extId}}" data-rerun-build-dependency-ids="{{build.dependencyIds}}">
                                    <img src="{{viewSettings.rootURL}}/plugin/build-pipeline-plugin/images/run.png" alt="trigger"/>
                        </span>
                            {{/if}}
                        {{/unless}}
                    {{else}}
                        {{#if viewSettings.isTriggerOnlyLatestJob}}
                            {{#if build.isLatestBuild}}
                                {{#if build.isUpstreamBuildLatest}}
<!--                                    <span class="bct-rerun-failed-latest-build-onclick-params" data-show-spinner-id="{{id}}" data-rerun-build-ext-id="{{build.extId}}" data-rerun-build-dependency-ids="{{build.dependencyIds}}" style="display: none;"></span>-->
                                    <span class="bct-rerun-failed-latest-build-onclick" data-show-spinner-id="{{id}}" data-rerun-build-ext-id="{{build.extId}}" data-rerun-build-dependency-ids="{{build.dependencyIds}}">
                                        <img src="{{viewSettings.rootURL}}/plugin/build-pipeline-plugin/images/run.png" alt="trigger"/>
                                    </span>
                                {{/if}}
                            {{/if}}
                        {{else}}
                            {{#if build.isManualTrigger}}
<!--                                <span class="bct-rerun-failed-manual-build-onclick-params" data-show-spinner-id="{{id}}" data-upstream-project-name="{{upstream.projectName}}" data-upstream-build-number="{{upstream.buildNumber}}" data-project-name="{{project.name}}" data-dependency-ids="{{build.dependencyIds}}" style="display: none;"></span>-->
                                <span class="bct-rerun-failed-manual-build-onclick" data-show-spinner-id="{{id}}" data-upstream-project-name="{{upstream.projectName}}" data-upstream-build-number="{{upstream.buildNumber}}" data-project-name="{{project.name}}" data-dependency-ids="{{build.dependencyIds}}">
                                    <img src="{{viewSettings.rootURL}}/plugin/build-pipeline-plugin/images/run.png" alt="trigger"/>
                                </span>
                            {{else}}
<!--                                <span class="bct-rerun-failed-build-onclick-params" data-show-spinner-id="{{id}}" data-rerun-build-ext-id="{{build.extId}}" data-rerun-build-dependency-ids="{{build.dependencyIds}}" style="display: none;"></span>-->
                                <span class="bct-rerun-failed-build-onclick" data-show-spinner-id="{{id}}" data-rerun-build-ext-id="{{build.extId}}" data-rerun-build-dependency-ids="{{build.dependencyIds}}">
                                    <img src="{{viewSettings.rootURL}}/plugin/build-pipeline-plugin/images/run.png" alt="trigger"/>
                                </span>
                            {{/if}}
                        {{/if}}
                    {{/if}}
                {{/if}}

                {{#if build.isReadyToBeManuallyBuilt}}
                    {{#if viewSettings.isTriggerOnlyLatestJob}}
                        {{#if build.isUpstreamBuildLatestSuccess}}
<!--                            <span class="bct-trigger-manual-build-latest-onclick-params" data-show-spinner-id="{{id}}" data-upstream-project-name="{{upstream.projectName}}" data-upstream-build-number="{{upstream.buildNumber}}" data-project-name="{{project.name}}" data-dependency-ids="{{build.dependencyIds}}" style="display: none;"></span>-->
                            <span class="bct-trigger-manual-build-latest-onclick" data-show-spinner-id="{{id}}" data-upstream-project-name="{{upstream.projectName}}" data-upstream-build-number="{{upstream.buildNumber}}" data-project-name="{{project.name}}" data-dependency-ids="{{build.dependencyIds}}">
                                <img src="{{viewSettings.rootURL}}/plugin/build-pipeline-plugin/images/run.png" alt="trigger"/>
                            </span>
                        {{/if}}
                    {{else}}
<!--                        <span class="bct-trigger-manual-build-onclick-params" data-show-spinner-id="{{id}}" data-upstream-project-name="{{upstream.projectName}}" data-upstream-build-number="{{upstream.buildNumber}}" data-project-name="{{project.name}}" data-dependency-ids="{{build.dependencyIds}}" style="display: none;"></span>-->
                        <span class="bct-trigger-manual-build-onclick" data-show-spinner-id="{{id}}" data-upstream-project-name="{{upstream.projectName}}" data-upstream-build-number="{{upstream.buildNumber}}" data-project-name="{{project.name}}" data-dependency-ids="{{build.dependencyIds}}">
                           <img src="{{viewSettings.rootURL}}/plugin/build-pipeline-plugin/images/run.png" alt="trigger"/>
                        </span>
                    {{/if}}
                {{/if}}
            </div>
        {{/unless}}
        {{#if project.disabled}}
            <div class="icons" id="icons-{{id}}">
                <span class="disabled">
                    <img src="{{viewSettings.rootURL}}/plugin/build-pipeline-plugin/images/warning.png" alt="warning-icon"/>
                </span>
            </div>
        {{/if}}
    </div>
</div>